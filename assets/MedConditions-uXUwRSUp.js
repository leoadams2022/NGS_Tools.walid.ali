import{r as s,j as t,R as S,_ as C}from"./index-QaPOaGOf.js";import{g as k,m as T,a as A,s as j}from"./localstorage-X86ulgJi.js";const v=S.lazy(()=>C(()=>import("./ConditionsList-Lvbmf7F0.js"),__vite__mapDeps([0,1,2]),import.meta.url)),B=S.lazy(()=>C(()=>import("./ConditionLi-C8s2909Q.js"),__vite__mapDeps([3,1,2]),import.meta.url));function z(){const[i,l]=s.useState(null),[N,f]=s.useState(null),[o,h]=s.useState(null),[c,y]=s.useState(!1),[L,d]=s.useState(!1),[D,g]=s.useState(""),[_,u]=s.useState(null),m=s.useRef(null),b=s.useRef(null),x=async()=>{try{y(!0),h(null);const e=await k("med_conditons_date_string"),a=await k("med_conditons_array");let n=await fetch(T);if(n=await n.json(),e.med_conditons_date_string!=n.med_conditons_date_string||!a.med_conditons_array){const r=await(await fetch(A)).json();await j("med_conditons_array",r),await j("med_conditons_date_string",n),f(n.med_conditons_date_string),l(r.med_conditons_array),m.current=r.med_conditons_array.map(w=>w.conditions.map(M=>({title:w.title,condition:M}))).flat();return}f(n.med_conditons_date_string),l(a.med_conditons_array),m.current=a.med_conditons_array.map(p=>p.conditions.map(r=>({title:p.title,condition:r}))).flat()}catch(e){l(null),console.error("MedConditions=>fetchData error:",e),h(e)}finally{y(!1)}};function E(e){(e.ctrlKey||e.metaKey)&&e.key==="k"&&(e.preventDefault(),d(a=>!a),g(""),u([]),b.current.focus())}const R=e=>{if(g(e.target.value),e.target.value===""){u([]);return}u(m.current.filter(a=>a.condition.toLowerCase().trim().includes(e.target.value.toLowerCase().trim())))};return s.useEffect(()=>{x()},[]),s.useEffect(()=>{const e=a=>E(a);return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),i&&!c?t.jsxs("div",{className:"relative w-full h-full bg-background-100 text-text-100 pt-4 px-2 transition-colors duration-500 ease-in-out overflow-auto",children:[t.jsx("div",{className:`w-screen h-screen fixed top-0 left-0 z-10 bg-background-100/90 transition duration-500 ease-in-out ${L?"opacity-100 translate-y-0":"opacity-0 -translate-y-full"}`,onClick:()=>d(!1),children:t.jsxs("div",{className:"absolute top-0 left-0 w-full bg-primary-100 py-8 flex justify-center items-center shadow-md",onClick:e=>e.stopPropagation(),children:[t.jsx("input",{type:"text",ref:b,className:"w-[70%] h-8 px-2 box-border inline-block text-black border focus:outline-none focus:ring focus:border-blue-400 rounded-sm shadow-lg",value:D,onChange:R}),t.jsx("ul",{className:"absolute top-[104px] text-gray-500 w-[60%] max-h-[450px] overflow-y-auto overflow-x-hidden box-border flex flex-col gap-2 px-2",children:_?_.map((e,a)=>t.jsxs(B,{condition:e.condition,i:a,skeleton:!1,children:[e.condition," ",t.jsx("span",{className:"px-2 py-1 uppercase bg-secondary-100 rounded-sm font-bold text-white",children:e.title})]},`${e.condition}_${a}`)):""}),t.jsx("button",{className:"absolute top-2 left-2 w-8 h-8 flex justify-center items-center text-text-100 hover:text-red-500 transition-colors duration-300 ",onClick:()=>d(!1),children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 8.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25H15m0-3-3-3m0 0-3 3m3-3V15"})})})]})}),i.map((e,a)=>t.jsxs("div",{className:"mb-2 px-4 pb-2 bg-slate-900/20 dark:bg-slate-100/10 border border-gray-600 dark:border-gray-300 rounded-md shadow-sm",children:[t.jsx("h3",{className:"my-2 pl-2 py-1 text-2xl font-bold tracking-wider bg-primary-100 text-center uppercase shadow-xl",children:e.title}),t.jsx(v,{data:e.conditions})]},`${e.title}}`)),t.jsxs("p",{className:"sticky bottom-0 left-0 w-fit bg-background-100/60 px-1 text-black dark:text-white flex items-center gap-1 rounded-sm",children:[i&&N," ",t.jsx("button",{onClick:x,disabled:c,children:"update"})]})]}):o?t.jsxs("div",{className:"w-full h-full flex flex-col justify-center items-center text-3xl font-bold capitalize text-red-500",children:[t.jsxs("span",{children:["fetch data error:",t.jsx("br",{}),String(o==null?void 0:o.message)]}),t.jsx("button",{onClick:x,className:"btn-secondary text-lg",disabled:c,children:"retry"})]}):t.jsx("div",{className:"relative w-full h-full bg-background-100 text-text-100 pt-4 px-2 overflow-auto",children:t.jsxs("div",{className:"mb-2 px-4 pb-2 bg-gray-400/20 animate-pulse border border-gray-600 dark:border-gray-300 rounded-md ",children:[t.jsx("h3",{className:"my-2 pl-2 py-1 text-2xl font-bold tracking-wider text-transparent bg-gray-400 animate-pulse ",children:"walid ali khan"}),t.jsx(v,{data:["Kidney cancer","Leukemia","Liver cancer","Non-Hodgkins lymphoma","Bladder cancer","Acute Myeloid Leukemia (AML)","Aplastic Anemia or myelodysplastic syndrome","Brain cancer","Blood cancer","Chronic Kidney Disease","Central nervous system cancer","End Stage Renal Disease","Esophageal Cancer","Multiple Myeloma","Parkinsons Disease","Rectal Cancer","Renal Toxicity","Systemic Scleroderma / Systemic Sclerosis","Male Breast Cancer","Miscarriage / Fetal Death - Is the facility where the miscarriage was treated on Camp Lejeune or in Jacksonville, North Carolina? â€“ if no, disqualify"],skeleton:!0})]})})}export{z as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./ConditionsList-Lvbmf7F0.js","./index-QaPOaGOf.js","./index-h_8Ytibf.css","./ConditionLi-C8s2909Q.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}